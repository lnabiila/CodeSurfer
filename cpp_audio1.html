<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Introduction C++</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      margin-top: 50px;
      margin-bottom: 50px;
    }

    .learning-container {
      background: white;
      border-radius: 20px;
      padding: 30px;
      max-width: 800px;
      width: 90%;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
    }

    .playing-indicator {
      text-align: center;
      color: #667eea;
      font-size: 14px;
      margin-bottom: 20px;
      opacity: 0.8;
    }

    .header {
      display: flex;
      align-items: center;
      margin-bottom: 30px;
    }

    .back-btn {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: #f0f0f0;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      margin-right: 15px;
      transition: all 0.2s ease;
    }

    .back-btn:before {
      content: '‚Üê';
      font-size: 18px;
      color: #666;
    }

    .back-btn:hover {
      background: #e0e0e0;
      transform: scale(1.1);
    }

    h1 {
      color: #333;
      font-size: 24px;
      font-weight: 600;
    }

    .cpp-logo-section {
      text-align: center;
      margin-bottom: 30px;
    }

    .cpp-logo {
      font-size: 48px;
      font-weight: bold;
      color: #667eea;
      margin-bottom: 20px;
    }

    .tech-icons {
      display: flex;
      justify-content: center;
      gap: 10px;
    }

    .tech-icon {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      background: linear-gradient(45deg, #667eea, #764ba2);
      opacity: 0.7;
    }

    .subtitle-area {
      background: #f8f9ff;
      border-radius: 15px;
      padding: 20px;
      margin-bottom: 30px;
      min-height: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .subtitle-text {
      text-align: center;
      font-size: 16px;
      color: #333;
      line-height: 1.5;
      transition: opacity 0.3s ease;
    }

    .audio-controls {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-bottom: 20px;
    }

    .control-btn {
      width: 50px;
      height: 50px;
      border: none;
      border-radius: 50%;
      background: #667eea;
      color: white;
      font-size: 18px;
      cursor: pointer;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .control-btn:hover {
      background: #5a6fd8;
      transform: scale(1.1);
    }

    .play-pause {
      width: 60px;
      height: 60px;
      font-size: 20px;
    }

    .progress-container {
      display: flex;
      align-items: center;
      gap: 15px;
      margin-bottom: 30px;
    }

    .time-display {
      font-size: 14px;
      color: #666;
      min-width: 35px;
    }

    .progress-bar {
      flex: 1;
      height: 6px;
      background: #e0e0e0;
      border-radius: 3px;
      overflow: hidden;
      cursor: pointer;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #667eea, #764ba2);
      border-radius: 3px;
      transition: width 0.1s ease;
    }

    .comprehension-card {
      background: #fff;
      border: 2px solid #f0f0f0;
      border-radius: 15px;
      padding: 20px;
      margin-bottom: 20px;
      opacity: 0;
      transform: translateY(20px);
      transition: all 0.3s ease;
    }

    .comprehension-card.show {
      opacity: 1;
      transform: translateY(0);
    }

    .card-title {
      font-weight: 600;
      color: #333;
      margin-bottom: 15px;
    }

    .card-content {
      color: #666;
      margin-bottom: 20px;
    }

    .card-buttons {
      display: flex;
      gap: 10px;
    }

    .card-btn {
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 500;
      transition: all 0.2s ease;
    }

    .repeat-btn {
      background: #f0f0f0;
      color: #666;
    }

    .repeat-btn:hover {
      background: #e0e0e0;
    }

    .understand-btn {
      background: #667eea;
      color: white;
    }

    .understand-btn:hover {
      background: #5a6fd8;
    }

    .next-section {
      text-align: center;
    }

    .next-btn {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      border: none;
      padding: 15px 30px;
      border-radius: 25px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .next-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
    }
  </style>
</head>

<body>
  <div class="learning-container">
    <div class="playing-indicator" id="playingIndicator">üéµ Ready to play</div>

    <div class="header">
      <div class="back-btn" onclick="window.location.href='cpp_audio.html'"></div>
      <h1>Introduction C++</h1>
    </div>

    <div class="main-content">
      <div class="cpp-logo-section">
        <div class="cpp-logo">C++</div>
      </div>

      <div class="subtitle-area">
        <div class="subtitle-text active" id="currentSubtitle">Click play to start learning about C++</div>
      </div>

      <div class="audio-controls">
        <button class="control-btn" id="prevBtn">‚èÆ</button>
        <button class="control-btn play-pause" id="playPauseBtn">‚ñ∂</button>
        <button class="control-btn" id="nextBtn">‚è≠</button>
        <button class="control-btn" id="restartBtn">üîÅ</button>
      </div>

      <div class="progress-container">
        <span class="time-display" id="currentTime">0:00</span>
        <div class="progress-bar" id="progressBar">
          <div class="progress-fill" id="progressFill"></div>
        </div>
        <span class="time-display" id="totalTime">0:31</span>
      </div>

      <div class="comprehension-card" id="comprehensionCard">
        <div class="card-title">Lesson Summary</div>
        <div class="card-content">
          C++ is a cross-platform language that can be used to create high-performance applications.<br /><br />
          C++ was developed by Bjarne Stroustrup, as an extension to the C language.<br /><br />
          C++ gives programmers a high level of control over system resources and memory.<br /><br />
          The language was updated 4 major times in 2011, 2014, 2017, and 2020 to C++11, C++14, C++17, and C++20.
        </div>
        <div class="card-buttons">
          <button class="card-btn repeat-btn" onclick="handleRepeat()">Repeat</button>
          <button class="card-btn understand-btn" onclick="handleUnderstand()">Understand</button>
        </div>
      </div>

      <div class="next-section" id="nextSection" style="display: none">
        <button class="next-btn">Next Part ‚Üí</button>
      </div>
    </div>
  </div>

  <!-- Hidden audio element -->
  <audio id="audioPlayer" preload="auto">
    <source src="cpp_audio.mp3" type="audio/mpeg">
    Your browser does not support the audio element.
  </audio>

  <script>
    // Audio and UI elements
    const audio = document.getElementById('audioPlayer');
    const playPauseBtn = document.getElementById('playPauseBtn');
    const progressBar = document.getElementById('progressBar');
    const progressFill = document.getElementById('progressFill');
    const currentTimeDisplay = document.getElementById('currentTime');
    const totalTimeDisplay = document.getElementById('totalTime');
    const playingIndicator = document.getElementById('playingIndicator');
    const subtitleElement = document.getElementById('currentSubtitle');
    const comprehensionCard = document.getElementById('comprehensionCard');
    const nextSection = document.getElementById('nextSection');

    // State variables
    let isPlaying = false;
    let currentSubtitleIndex = -1;
    let showCard = false;

    // Subtitle data with timestamps (in seconds)
    const subtitles = [
      { time: 0, text: "C++ is a cross-platform language that can be used to create high-performance applications." },
      { time: 6, text: "C++ was developed by Bjarne Stroustrup, as an extension to the C language." },
      { time: 11, text: "C++ gives programmers a high level of control over system resources and memory." },
      { time: 17, text: "The language was updated 4 major times in 2011, 2014, 2017, and 2020 to C++11, C++14, C++17, and C++20." }
    ];

    // Format time in MM:SS format
    function formatTime(seconds) {
      const mins = Math.floor(seconds / 60);
      const secs = Math.floor(seconds % 60);
      return `${mins}:${secs.toString().padStart(2, '0')}`;
    }

    // Update subtitle based on current time
    function updateSubtitle(currentTime) {
      for (let i = subtitles.length - 1; i >= 0; i--) {
        if (currentTime >= subtitles[i].time) {
          if (currentSubtitleIndex !== i) {
            currentSubtitleIndex = i;
            subtitleElement.style.opacity = '0';
            setTimeout(() => {
              subtitleElement.textContent = subtitles[i].text;
              subtitleElement.style.opacity = '1';
            }, 300);
          }
          break;
        }
      }
    }

    // Show comprehension card
    function showComprehensionCard() {
      if (!showCard) {
        comprehensionCard.classList.add('show');
        showCard = true;
      }
    }

    // Play/Pause functionality
    function togglePlayPause() {
      if (isPlaying) {
        audio.pause();
        playPauseBtn.textContent = '‚ñ∂';
        playingIndicator.textContent = '‚è∏ Paused';
        isPlaying = false;
      } else {
        audio.play();
        playPauseBtn.textContent = '‚è∏';
        playingIndicator.textContent = 'üéµ Playing';
        isPlaying = true;
        updateSubtitle(audio.currentTime);
      }
    }

    // Handle repeat button
    function handleRepeat() {
      audio.currentTime = 0;
      currentSubtitleIndex = -1;
      comprehensionCard.classList.remove('show');
      showCard = false;

      if (!isPlaying) {
        togglePlayPause();
      }
    }

    // Handle understand button
    function handleUnderstand() {
      comprehensionCard.style.display = 'none';
      nextSection.style.display = 'block';
    }

    // Seek to position in audio
    function seekTo(percentage) {
      const seekTime = (percentage / 100) * audio.duration;
      audio.currentTime = seekTime;
    }

    // Event listeners
    playPauseBtn.addEventListener('click', togglePlayPause);

    // Previous button (restart)
    document.getElementById('prevBtn').addEventListener('click', () => {
      audio.currentTime = Math.max(0, audio.currentTime - 5);
    });

    // Next button (skip to end)
    document.getElementById('nextBtn').addEventListener('click', () => {
      audio.currentTime = Math.min(audio.duration, audio.currentTime + 5);
    });

    document.getElementById('restartBtn').addEventListener('click', () => {
      audio.pause();
      audio.currentTime = 0;
      currentSubtitleIndex = -1;
      subtitleElement.textContent = "Click play to start learning about C++";
      subtitleElement.style.opacity = '1';
      comprehensionCard.classList.remove('show');
      comprehensionCard.style.display = 'block';
      nextSection.style.display = 'none';
      playPauseBtn.textContent = '‚ñ∂';
      playingIndicator.textContent = 'üéµ Ready to play';
      isPlaying = false;
    });

    // Progress bar click
    progressBar.addEventListener('click', (e) => {
      const rect = progressBar.getBoundingClientRect();
      const percentage = (e.clientX - rect.left) / rect.width * 100;
      seekTo(percentage);
    });

    // Audio event listeners
    audio.addEventListener('loadedmetadata', () => {
      totalTimeDisplay.textContent = formatTime(audio.duration);
    });

    audio.addEventListener('timeupdate', () => {
      const currentTime = audio.currentTime;
      const duration = audio.duration;

      // Update time display
      currentTimeDisplay.textContent = formatTime(currentTime);

      // Update progress bar
      const progressPercent = (currentTime / duration) * 100;
      progressFill.style.width = progressPercent + '%';

      // Update subtitle
      updateSubtitle(currentTime);

      // Show comprehension card near the end
      if (currentTime >= duration - 3 && !showCard) {
        showComprehensionCard();
      }
    });

    audio.addEventListener('ended', () => {
      playPauseBtn.textContent = '‚ñ∂';
      playingIndicator.textContent = '‚úÖ Completed';
      isPlaying = false;
      showComprehensionCard();
    });

    audio.addEventListener('error', (e) => {
      console.error('Audio error:', e);
      playingIndicator.textContent = '‚ùå Audio file not found';
      playPauseBtn.disabled = true;
    });

    // Back button animation
    const backBtns = document.querySelectorAll('.back-btn');
    backBtns.forEach(btn => {
      btn.addEventListener('click', function () {
        this.style.transform = 'scale(0.9)';
        setTimeout(() => {
          this.style.transform = '';
        }, 150);
      });
    });
  </script>
</body>

</html>